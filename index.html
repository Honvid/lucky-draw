<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Honvid">
    <link rel="shortcut icon" href="assets/images/favicon_1.ico">
    <title>抽奖</title>
    <link href="assets/plugins/select2/css/select2.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/responsive.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/lucky.css" rel="stylesheet" type="text/css" />
    <!-- HTML5 Shiv and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
    <script src="assets/js/modernizr.min.js"></script>
</head>
<body>
<div class="wrap">
    <div class="prize_con">
        <p class="prize_grade"><span>特等奖</span> <i>10000</i>元</p>
        <div class="prize_list vetically">
            <ul><li>546221</li></ul>
        </div>
        <p class="start"><img src="assets/images/prize_start.png" alt=""></p>
        <ul class="prize_set">
            <li class="set_grade">奖等
                <select id="set_grade">
                    <option>选择奖等</option>
                    <option>特等奖</option>
                    <option>一等奖</option>
                    <option>二等奖</option>
                    <option>三等奖</option>
                </select>
            </li>
            <li class="set_people">人数<input type="tel" placeholder="输入中奖人数" id="prizeCount"></li>
            <li class="set_money">金额<input type="tel" placeholder="输入中奖金额" id="prizeMoney"></li>
        </ul>
    </div>
</div>
<input type="hidden" value="0" id="prize_btn">
<script src="assets/js/jquery.min.js"></script>
<script>
    var myNumber;
    var arr = [];
    var code = [302610,210022,159862,158602,145635,856997,586223,546221,145213,987451,251364,854136,581698,123785,521387,752169,718954,412321,898989,121245,788565,458558,589659,455212,964632,458412,223344,112233,335566,778899];

    /*随机所有的code并且不重复*/
    function showRandomNum(num) {
        var li = "";
        for(var i = 0; i < code.length; i++){
            arr[i] = i;
        }
        arr.sort(function(){
            return 0.5 - Math.random();
        });

        for(var i = 0; i < num; i++){
            var index = arr[i];
            li += '<li>'+code[index]+'</li>';
        }

        $(".prize_list ul").html(li);
    }

    $(function () {
        $(".start").click(function(){
            if($("#prize_btn").val() == 0){
                if($("#set_grade").val() == "选择奖等") {
                    alert("请选择奖等");
                    return;
                }else if($("#prizeCount").val() == "") {
                    alert("请输入中奖人数");
                    return;
                }else if($("#prizeCount").val() > 10) {
                    alert("单次抽奖人数不能超过10人");
                    return;
                }else if($("#prizeMoney").val() == "") {
                    alert("请输入中奖金额");
                    return;
                }else{
                    $("#prize_btn").val(1);
                    var num = $("#prizeCount").val();
                    $(this).find("img").attr("src","assets/images/prize_stop.png");

                    myNumber = setInterval(function(){
                        showRandomNum(num);
                    }, 30);
                }
            }else{
                $("#prize_btn").val(0);
                clearInterval(myNumber);
                $(this).find("img").attr("src","assets/images/prize_start.png");
            }
        });

        //回车键控制开始和停止
        $(document).keydown(function (event) {
            var e = event || window.event || arguments.callee.caller.arguments[0];
            if (e && e.keyCode == 13) { // enter 键
                $(".start").click();
            }
        });

        $("#set_grade").change(function(){
            $(".prize_grade span").text($(this).val());
        });

        $("#prizeMoney").keyup(function(){
            $(".prize_grade i").text($(this).val());
        });
    });
</script>
</body>
</html>